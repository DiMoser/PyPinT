language: python
python:
  - 3.2
  - 3.3
virtualenv:
  system_site_packages: true
env:
  global:
    - SITE_PKG_DIR=$VIRTUAL_ENV/lib/python$TRAVIS_PYTHON_VERSION/site-packages
    - PYTHONPATH=$VIRTUAL_ENV/lib/python$TRAVIS_PYTHON_VERSION/site-packages:/usr/local/lib/python$TRAVIS_PYTHON_VERSION/site-packages/:$PYTHONPATH
before_install:
  - rm -f $VIRTUAL_ENV/lib/python$TRAVIS_PYTHON_VERSION/no-global-site-packages.txt
  - sudo apt-get update -qq
  - sudo apt-get install python3-all python3-numpy python3-scipy libatlas-dev libatlas-base-dev liblapack-dev gfortran
#  - pip install nose
#  - pip install numpy
#  - pip install Cython
  # mpmath for scipy.special tests
#  - pip install mpmath
#  - pip install scipy
  - python -V
  - pip list
install:
  - export PYTHONIOENCODING=UTF8 # just in case
  - 'if [ $TRAVIS_PYTHON_VERSION == "3.2" ] || [ $TRAVIS_PYTHON_VERSION == "3.3" ]; then pip install https://github.com/y-p/numpy/archive/1.6.2_with_travis_fix.tar.gz; fi'
  - 'if [ ${TRAVIS_PYTHON_VERSION:0:1} == "2" ]; then pip install numpy; fi' # should be nop if pre-installed
  - pip install --use-mirrors -r requirements.txt
  - pip list
script:
  - "nosetests -c nose.cfg"
notifications:
  email: false